<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini APIä¿®å¤æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .fix-section {
            background: #e8f5e8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        .problem-section {
            background: #f8d7da;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #dc3545;
        }
        .test-section {
            background: #e3f2fd;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
        }
        .code {
            background: #f1f3f4;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
            font-size: 12px;
        }
        .model-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        button {
            background: #007cba;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background: #005a8b;
        }
        .error-highlight {
            background: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            border-left: 3px solid #ffc107;
            margin: 10px 0;
        }
        .success-highlight {
            background: #d4edda;
            padding: 10px;
            border-radius: 5px;
            border-left: 3px solid #28a745;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ Gemini APIä¿®å¤</h1>
    
    <div class="problem-section">
        <h2>âŒ å‘ç°çš„é—®é¢˜</h2>
        <div class="error-highlight">
            <strong>é”™è¯¯ä¿¡æ¯ï¼š</strong><br>
            <code>models/gemini-pro is not found for API version v1beta, or is not supported for generateContent</code>
        </div>
        
        <h3>é—®é¢˜åŸå› ï¼š</h3>
        <ul>
            <li><strong>æ¨¡å‹åç§°è¿‡æ—¶</strong>ï¼š<code>gemini-pro</code>å¯èƒ½å·²è¢«å¼ƒç”¨æˆ–é‡å‘½å</li>
            <li><strong>APIç‰ˆæœ¬é—®é¢˜</strong>ï¼šv1betaç‰ˆæœ¬å¯èƒ½ä¸æ”¯æŒæŸäº›æ—§æ¨¡å‹</li>
            <li><strong>åœ°åŒºé™åˆ¶</strong>ï¼šæŸäº›åœ°åŒºå¯èƒ½æ— æ³•è®¿é—®ç‰¹å®šæ¨¡å‹</li>
        </ul>
    </div>

    <div class="fix-section">
        <h2>âœ… ä¿®å¤æ–¹æ¡ˆ</h2>
        
        <h3>ğŸ”„ å¤šæ¨¡å‹å›é€€æœºåˆ¶</h3>
        <p>ç°åœ¨æ’ä»¶ä¼šæŒ‰ä¼˜å…ˆçº§å°è¯•å¤šä¸ªGeminiæ¨¡å‹ï¼š</p>
        
        <div class="model-list">
            <h4>æ¨¡å‹å°è¯•é¡ºåºï¼š</h4>
            <ol>
                <li><code>gemini-1.5-flash-latest</code> - æœ€æ–°çš„Flashæ¨¡å‹</li>
                <li><code>gemini-1.5-flash</code> - ç¨³å®šçš„Flashæ¨¡å‹</li>
                <li><code>gemini-pro</code> - ä¼ ç»ŸProæ¨¡å‹ï¼ˆå¤‡ç”¨ï¼‰</li>
            </ol>
        </div>
        
        <h3>ğŸ› ï¸ æŠ€æœ¯å®ç°</h3>
        <div class="code">// æŒ‰ä¼˜å…ˆçº§å°è¯•ä¸åŒæ¨¡å‹
const models = [
  'gemini-1.5-flash-latest',
  'gemini-1.5-flash', 
  'gemini-pro'
];

for (const model of models) {
  try {
    response = await fetch(`.../${model}:generateContent?key=${apiKey}`);
    if (response.ok) {
      console.log(`âœ… Successfully using model: ${model}`);
      break;
    }
  } catch (error) {
    console.log(`âŒ Model ${model} failed, trying next...`);
  }
}</div>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª æµ‹è¯•æ­¥éª¤</h2>
        
        <h3>1. é‡æ–°åŠ è½½æ’ä»¶</h3>
        <button onclick="openExtensions()">æ‰“å¼€æ‰©å±•ç¨‹åºé¡µé¢</button>
        <p>åˆ·æ–°æ’ä»¶ä»¥åº”ç”¨Gemini APIä¿®å¤</p>
        
        <h3>2. è·å–Gemini API Key</h3>
        <button onclick="openGeminiAPI()">è·å–Gemini API Key</button>
        <ol>
            <li>è®¿é—®Google AI Studio</li>
            <li>åˆ›å»ºæ–°çš„API Key</li>
            <li>ç¡®ä¿API Keyæœ‰è®¿é—®Geminiæ¨¡å‹çš„æƒé™</li>
        </ol>
        
        <h3>3. é…ç½®å’Œæµ‹è¯•</h3>
        <ol>
            <li>åœ¨æ’ä»¶è®¾ç½®ä¸­é€‰æ‹©"Google Gemini"</li>
            <li>è¾“å…¥æ‚¨çš„Gemini API Key</li>
            <li>ç‚¹å‡»"æµ‹è¯•ç¿»è¯‘"æŒ‰é’®</li>
            <li>è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—ï¼Œåº”è¯¥çœ‹åˆ°æ¨¡å‹å°è¯•è¿‡ç¨‹</li>
        </ol>
        
        <h3>4. å®é™…ç¿»è¯‘æµ‹è¯•</h3>
        <button onclick="openTestVideo()">æ‰“å¼€æµ‹è¯•è§†é¢‘</button>
        <ol>
            <li>åœ¨YouTubeè§†é¢‘ä¸Šå¯ç”¨ç¿»è¯‘</li>
            <li>è§‚å¯Ÿç¿»è¯‘æ˜¯å¦æ­£å¸¸å·¥ä½œ</li>
            <li>æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>ğŸ” é¢„æœŸçš„æ§åˆ¶å°æ—¥å¿—</h2>
        
        <h3>æˆåŠŸæƒ…å†µï¼š</h3>
        <div class="success-highlight">
            <div class="code">ğŸ”„ Starting Gemini translation: {text: "Hello", sourceLang: "en", targetLang: "zh-CN"}
ğŸ“¤ Sending request to Gemini API
ğŸ”„ Trying Gemini model: gemini-1.5-flash-latest
âœ… Successfully using model: gemini-1.5-flash-latest
ğŸ“¥ Gemini API response received
âœ… Translation completed: ä½ å¥½</div>
        </div>
        
        <h3>å›é€€æƒ…å†µï¼š</h3>
        <div class="code">ğŸ”„ Trying Gemini model: gemini-1.5-flash-latest
âŒ Model gemini-1.5-flash-latest failed: 404
ğŸ”„ Trying Gemini model: gemini-1.5-flash
âœ… Successfully using model: gemini-1.5-flash
ğŸ“¥ Gemini API response received
âœ… Translation completed: ä½ å¥½</div>
        
        <h3>API KeyéªŒè¯ï¼š</h3>
        <div class="code">ğŸ”‘ Validating API Key for gemini
ğŸ“¡ API response status: 200
âœ… API Key validation successful</div>
    </div>

    <div class="fix-section">
        <h2>ğŸ¯ éªŒè¯è¦ç‚¹</h2>
        
        <h3>âœ… ä¿®å¤éªŒè¯ï¼š</h3>
        <ul>
            <li>API KeyéªŒè¯ä¸å†æŠ¥é”™"models/gemini-pro is not found"</li>
            <li>ç¿»è¯‘åŠŸèƒ½æ­£å¸¸å·¥ä½œ</li>
            <li>æ§åˆ¶å°æ˜¾ç¤ºæˆåŠŸä½¿ç”¨çš„æ¨¡å‹åç§°</li>
            <li>å¦‚æœä¸€ä¸ªæ¨¡å‹å¤±è´¥ï¼Œä¼šè‡ªåŠ¨å°è¯•ä¸‹ä¸€ä¸ª</li>
        </ul>
        
        <h3>ğŸš¨ å¦‚æœä»æœ‰é—®é¢˜ï¼š</h3>
        <ul>
            <li>æ£€æŸ¥API Keyæ˜¯å¦æœ‰æ•ˆä¸”æœ‰è¶³å¤Ÿé…é¢</li>
            <li>ç¡®è®¤æ‚¨çš„åœ°åŒºæ”¯æŒGemini API</li>
            <li>å°è¯•åœ¨Google AI Studioä¸­ç›´æ¥æµ‹è¯•API Key</li>
            <li>æŸ¥çœ‹æ§åˆ¶å°çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸŒ æ‰‹åŠ¨æµ‹è¯•Gemini API</h2>
        <p>æ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨æµ‹è¯•ä¸åŒçš„Geminiæ¨¡å‹ï¼š</p>
        
        <h4>æµ‹è¯•æœ€æ–°æ¨¡å‹ï¼š</h4>
        <div class="code">curl -X POST \
  "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [{"parts": [{"text": "Hello"}]}],
    "generationConfig": {"maxOutputTokens": 10}
  }'</div>
        
        <h4>æµ‹è¯•ç¨³å®šæ¨¡å‹ï¼š</h4>
        <div class="code">curl -X POST \
  "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [{"parts": [{"text": "Hello"}]}],
    "generationConfig": {"maxOutputTokens": 10}
  }'</div>
    </div>

    <script>
        function openExtensions() {
            window.open('chrome://extensions/', '_blank');
        }
        
        function openGeminiAPI() {
            window.open('https://aistudio.google.com/app/apikey', '_blank');
        }
        
        function openTestVideo() {
            window.open('https://www.youtube.com/watch?v=jNQXAC9IVRw', '_blank');
        }
    </script>
</body>
</html>
