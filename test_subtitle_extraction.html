<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­—å¹•æå–åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007cba;
        }
        .success { border-left-color: #28a745; background: #d4edda; }
        .warning { border-left-color: #ffc107; background: #fff3cd; }
        .error { border-left-color: #dc3545; background: #f8d7da; }
        .info { border-left-color: #17a2b8; background: #d1ecf1; }
        .code {
            background: #f1f3f4;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        button {
            background: #007cba;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            margin: 8px;
            font-size: 14px;
        }
        button:hover {
            background: #005a8b;
        }
        .improvement-list {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .improvement-list h4 {
            color: #155724;
            margin-top: 0;
        }
        .improvement-list ul {
            margin: 10px 0;
        }
        .improvement-list li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ å­—å¹•æå–åŠŸèƒ½æ”¹è¿›æµ‹è¯•</h1>
    
    <div class="test-section success">
        <h2>âœ… å­—å¹•æå–åŠŸèƒ½æ”¹è¿›å†…å®¹</h2>
        
        <div class="improvement-list">
            <h4>ğŸ¯ æ–°å¢åŠŸèƒ½ï¼š</h4>
            <ul>
                <li><strong>å¤šé€‰æ‹©å™¨æ”¯æŒ</strong>ï¼šæ”¯æŒå¤šç§YouTubeå­—å¹•å…ƒç´ é€‰æ‹©å™¨</li>
                <li><strong>å¤šç­–ç•¥æå–</strong>ï¼šåŒæ—¶ç›‘æ§å¤šç§å­—å¹•æº</li>
                <li><strong>æ–‡æœ¬è½¨é“æ”¯æŒ</strong>ï¼šç›´æ¥ä»videoå…ƒç´ çš„textTracksæå–</li>
                <li><strong>æ™ºèƒ½å­—å¹•æ¸…ç†</strong>ï¼šè‡ªåŠ¨æ¸…ç†éŸ³ä¹ç¬¦å·ã€æ‹¬å·å†…å®¹ç­‰</li>
                <li><strong>é‡å¤å†…å®¹è¿‡æ»¤</strong>ï¼šé¿å…é‡å¤ç¿»è¯‘ç›¸åŒå†…å®¹</li>
                <li><strong>å¢å¼ºçš„å­—å¹•æŒ‰é’®æ£€æµ‹</strong>ï¼šæ”¯æŒå¤šç§å­—å¹•æŒ‰é’®é€‰æ‹©å™¨</li>
                <li><strong>é”®ç›˜å¿«æ·é”®æ”¯æŒ</strong>ï¼šå°è¯•ä½¿ç”¨Cé”®å¯ç”¨å­—å¹•</li>
            </ul>
        </div>
        
        <div class="improvement-list">
            <h4>ğŸ” æ”¯æŒçš„å­—å¹•é€‰æ‹©å™¨ï¼š</h4>
            <ul>
                <li><code>.caption-window .ytp-caption-segment</code></li>
                <li><code>.ytp-caption-window-container .ytp-caption-segment</code></li>
                <li><code>.html5-captions-display .captions-text</code></li>
                <li><code>.ytp-caption-window-container span</code></li>
                <li><code>[class*="caption"] span</code></li>
                <li><code>.captions-text</code></li>
            </ul>
        </div>
    </div>

    <div class="test-section info">
        <h2>ğŸ§ª æµ‹è¯•æ­¥éª¤</h2>
        
        <h3>1. é‡æ–°åŠ è½½æ’ä»¶</h3>
        <ol>
            <li>è®¿é—® <code>chrome://extensions/</code></li>
            <li>æ‰¾åˆ° "AI Video Translator" æ’ä»¶</li>
            <li>ç‚¹å‡»åˆ·æ–°æŒ‰é’® ğŸ”„</li>
        </ol>
        
        <h3>2. æµ‹è¯•ä¸åŒç±»å‹çš„YouTubeè§†é¢‘</h3>
        <button onclick="openTestVideos()">æ‰“å¼€æµ‹è¯•è§†é¢‘</button>
        <ul>
            <li><strong>è‡ªåŠ¨ç”Ÿæˆå­—å¹•</strong>ï¼šè‹±æ–‡è§†é¢‘ï¼ŒYouTubeè‡ªåŠ¨ç”Ÿæˆå­—å¹•</li>
            <li><strong>æ‰‹åŠ¨ä¸Šä¼ å­—å¹•</strong>ï¼šæœ‰åˆ›ä½œè€…ä¸Šä¼ çš„å­—å¹•æ–‡ä»¶</li>
            <li><strong>å¤šè¯­è¨€å­—å¹•</strong>ï¼šæ”¯æŒå¤šç§è¯­è¨€çš„è§†é¢‘</li>
            <li><strong>å®æ—¶ç›´æ’­</strong>ï¼šå¸¦æœ‰å®æ—¶å­—å¹•çš„ç›´æ’­</li>
        </ul>
        
        <h3>3. è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—</h3>
        <p>åœ¨YouTubeé¡µé¢æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ä¸­çš„è¯¦ç»†æ—¥å¿—ï¼š</p>
        <div class="code">é¢„æœŸçš„æ–°æ—¥å¿—æ ¼å¼ï¼š
ğŸ” Starting YouTube subtitle extraction...
ğŸ‘€ Setting up subtitle observers...
ğŸ“º Found caption element with selector: .caption-window
ğŸ”˜ Attempting to enable YouTube captions...
ğŸ¯ Found caption button with selector: .ytp-subtitles-button
âœ… Captions already enabled
ğŸ” Processing YouTube captions...
ğŸ“ Found 2 caption elements with selector: .caption-window .ytp-caption-segment
ğŸ“„ Current caption text: Hello, welcome to this video
ğŸ§¹ Cleaned caption text: Hello, welcome to this video
ğŸ”„ Attempting to translate: Hello, welcome to this video</div>
    </div>

    <div class="test-section warning">
        <h2>ğŸ” è°ƒè¯•å‘½ä»¤</h2>
        <p>å¦‚æœå­—å¹•æå–ä»æœ‰é—®é¢˜ï¼Œå¯ä»¥åœ¨YouTubeé¡µé¢æ§åˆ¶å°ä¸­è¿è¡Œä»¥ä¸‹è°ƒè¯•å‘½ä»¤ï¼š</p>
        
        <h3>æ£€æŸ¥å­—å¹•å…ƒç´ ï¼š</h3>
        <div class="code">// æ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„å­—å¹•å…ƒç´ 
const selectors = [
    '.caption-window .ytp-caption-segment',
    '.ytp-caption-window-container .ytp-caption-segment',
    '.html5-captions-display .captions-text',
    '.ytp-caption-window-container span',
    '[class*="caption"] span',
    '.captions-text'
];

selectors.forEach(selector => {
    const elements = document.querySelectorAll(selector);
    console.log(`${selector}: ${elements.length} elements found`);
    elements.forEach((el, i) => {
        console.log(`  ${i}: "${el.textContent.trim()}"`);
    });
});
</div>
        
        <h3>æ£€æŸ¥è§†é¢‘æ–‡æœ¬è½¨é“ï¼š</h3>
        <div class="code">// æ£€æŸ¥videoå…ƒç´ çš„æ–‡æœ¬è½¨é“
const video = document.querySelector('video');
if (video && video.textTracks) {
    console.log(`Found ${video.textTracks.length} text tracks:`);
    for (let i = 0; i < video.textTracks.length; i++) {
        const track = video.textTracks[i];
        console.log(`Track ${i}:`, {
            kind: track.kind,
            language: track.language,
            label: track.label,
            mode: track.mode,
            cues: track.cues ? track.cues.length : 'N/A'
        });
    }
}
</div>
        
        <h3>æ‰‹åŠ¨è§¦å‘å­—å¹•å¤„ç†ï¼š</h3>
        <div class="code">// æ‰‹åŠ¨è§¦å‘å­—å¹•å¤„ç†ï¼ˆå¦‚æœæ’ä»¶å·²åŠ è½½ï¼‰
if (window.videoTranslator) {
    window.videoTranslator.extractYouTubeSubtitles();
}
</div>
    </div>

    <div class="test-section error">
        <h2>ğŸš¨ å¸¸è§é—®é¢˜è§£å†³</h2>
        
        <h3>å­—å¹•æŒ‰é’®æ‰¾ä¸åˆ°</h3>
        <ul>
            <li>ç¡®ä¿è§†é¢‘ç¡®å®æœ‰å­—å¹•ï¼ˆæŸ¥çœ‹YouTubeæ’­æ”¾å™¨åº•éƒ¨æ˜¯å¦æœ‰CCæŒ‰é’®ï¼‰</li>
            <li>å°è¯•æ‰‹åŠ¨ç‚¹å‡»å­—å¹•æŒ‰é’®</li>
            <li>æ£€æŸ¥è§†é¢‘æ˜¯å¦ä¸ºç§äººæˆ–å—é™åˆ¶å†…å®¹</li>
        </ul>
        
        <h3>å­—å¹•å…ƒç´ æ£€æµ‹å¤±è´¥</h3>
        <ul>
            <li>YouTubeå¯èƒ½æ›´æ–°äº†å­—å¹•å…ƒç´ çš„CSSç±»å</li>
            <li>ä½¿ç”¨è°ƒè¯•å‘½ä»¤æ£€æŸ¥å½“å‰é¡µé¢çš„å­—å¹•å…ƒç´ ç»“æ„</li>
            <li>å°è¯•åˆ·æ–°é¡µé¢æˆ–åˆ‡æ¢åˆ°å…¶ä»–è§†é¢‘</li>
        </ul>
        
        <h3>ç¿»è¯‘ä¸æ˜¾ç¤º</h3>
        <ul>
            <li>æ£€æŸ¥æ˜¯å¦æ­£ç¡®é…ç½®äº†API Key</li>
            <li>æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰ç¿»è¯‘é”™è¯¯</li>
            <li>ç¡®è®¤å­—å¹•å®¹å™¨æ˜¯å¦æ­£ç¡®åˆ›å»º</li>
        </ul>
    </div>

    <script>
        function openTestVideos() {
            // Open different types of test videos
            const testVideos = [
                'https://www.youtube.com/watch?v=dQw4w9WgXcQ', // Classic test video
                'https://www.youtube.com/watch?v=jNQXAC9IVRw', // TED talk with good captions
                'https://www.youtube.com/watch?v=9bZkp7q19f0' // Another test video
            ];
            
            testVideos.forEach((url, index) => {
                setTimeout(() => {
                    window.open(url, `_blank_${index}`);
                }, index * 1000); // Stagger the opening
            });
        }
    </script>
</body>
</html>
